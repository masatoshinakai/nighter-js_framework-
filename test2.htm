<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="./template.js"></script>
<script src="./nighter.js"></script>
<style>
@media screen and (min-width:481px) { 
	.container {
		font-size:large;
		display: grid;
		grid-template-columns: 0.33fr 0.33fr 0.34+-fr;
		grid-template-rows: 1fr 1fr 1fr;
		gap: 7px 7px;
		grid-auto-flow: row;
		grid-template-areas:
			"a b c"
			"d e  f"
			"g h  i";
	}
}
@media screen and (max-width:480px) { 
	input[type="text"]{
		font-size:xx-small;
	}
	.container {
		background-color:pink;
		display: grid;
		grid-template-columns: 1fr;
		grid-template-rows: 1fr 0.5fr 0.5fr;
		gap: 7px 7px;
		grid-auto-flow: row;
		grid-template-areas:
			"a"
			"b"
			"c";
	}
}
#TEST{
	background-color:blue;
}
</style>
<script language="javascript">
const start=()=>{
	let tmp=new NIGHTER();
	let a=[];
	let b=[];
	let d=[];
	let c;
	const GridStyle=[[
		"border:solid 2px BLACK;width:100px;background-color:lightGray;text-align:center;"
		,"border:solid 2px BLACK;width:150px;background-color:lightGray;text-align:center;"
	]
	,[
		"border:solid 2px BLACK;text-align:right;"
		,"border:solid 2px BLACK;text-align:left;"
	]];


//デザインされた配置にあるDIV要素にテンプレートを付与する
	for(let i=0;i<2;i++){
		a.push(tmp.import_template(SYOHIN,{"location":"A1"}));

//$をノード名の前につけることでそのノードの内容を取得／設定する
		a[a.length-1].$hincd("TEST"+(a.length-1));

//表をテンプレートに組み込む方法
//$$をノード名の前につけることでそのノードを取得する
		let ele1=tmp.createGrid({"STYLE":GridStyle,"SQL":"select SYOCD,SYOMN from dbo.M_SYOHIN"});
		a[a.length-1].$$hinlst().appendChild(ele1);
	}
	for(let i=0;i<2;i++){
		b.push(tmp.import_template(TOKUI,{"location":"A2"}));
	}
	c=tmp.import_template(TOKUI,{"location":"A3"});

	b[1].$btn1("AAAA");

//各テンプレートに定義された関数の実行


	b[0].$tokcd("TOKUI");
	b[1].$hincd("SYOHIN");

	c.$tokcd("TOKUI2");
	c.$hincd("SYOHIN2");

console.log(b[1].$hincd());
console.log(c.$tokcd());
/*
	tmp.getNode(c,"hincd").addEventListener("change",function(){
		c["class"].getHinname(c[0],this.value);
	});
*/
//表の描画	
	tmp.import_template(SYOHIN_GRID,{"location":"A4","template":"syohin_grid"});
//データフォーマット
/*
	const data=[
			 [{h:1030,t:"data112345678"},{h:2010,t:"data2"},{h:1020,t:"data3"},{h:1010,t:"data4"},{h:2020,t:"data5"}]
			,[{h:1510,t:"data1"},{h:1015,t:"data2"},{h:2010,t:"data3"},{h:1520,t:"data4"},{h:1025,t:"data5"}]
			,[{h:2015,t:"data1"},{h:2020,t:"data2"},{h:1025,t:"data3"},{h:1015,t:"data4"},{h:2020,t:"data5"}]
			];
*/

//グラフの描画
//sqlでグラフデータを取得する
	let data=tmp.sql2data("select * from GraphData;",{h:"value",t:"code",c:"color",k:"key"});

/*
=====データフォーマット=====
	const data=[
			 [{h:1030,t:"data112345678"},{h:2010,t:"data2"},{h:1020,t:"data3"},{h:1010,t:"data4"},{h:2020,t:"data5"}]
			,[{h:1510,t:"data1"},{h:1015,t:"data2"},{h:2010,t:"data3"},{h:1520,t:"data4"},{h:1025,t:"data5"}]
			,[{h:2015,t:"data1"},{h:2020,t:"data2"},{h:1025,t:"data3"},{h:1015,t:"data4"},{h:2020,t:"data5"}]
			];
*/

	tmp.makeStackBarGraph(document.getElementById("A6"),data,{seps:5,titles:"積上げ棒グラフ サンプル",tooltips:"on",meds_max:10000});
	tmp.makeBarGraph(document.getElementById("A7"),data[0],{seps:2,titles:"シンプル棒グラフ サンプル",tooltips:"on",meds_max:5000});
	tmp.makeStepBarGraph(document.getElementById("A8"),data[0],{titles:"階段グラフ サンプル",tooltips:"off",seps:0,meds_max:8000});


}		

</script>
</head>
<body onload="start();">
<div class="container">
  <div id="A1" style="border:solid 1px green; grid-area:c;"></div>
  <div id="A2" style="border:solid 1px red; grid-area:a;"></div>
  <div id="A3" style="border:solid 1px blue; grid-area:b;"></div>
  <div id="A4" style="border:solid 1px pink; grid-area:d;"></div>
  <div id="A5" style="border:solid 1px pink; grid-area:e;"></div>
  <div id="A6" style="border:solid 1px pink; grid-area:g;"></div>
  <div id="A7" style="border:solid 1px pink; grid-area:h;"></div>
  <div id="A8" style="border:solid 1px pink; grid-area:i;"></div>
  
</div>
</body>
</html>

